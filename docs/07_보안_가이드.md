# 보안 가이드

> 안드로이드 테스트 및 배포 전 점검

---

## 1. 안드로이드 테스트 vs 보안

**안드로이드 APK 빌드/테스트 자체는 보안 위험을 높이지 않습니다.**

- APK는 앱 코드를 포함할 뿐, 서버/DB 접근은 Firebase 규칙으로 제어
- 테스트용 디버그 APK는 서명만 다를 뿐, 동일한 Firebase 프로젝트 사용

---

## 2. SSO (Google 로그인)

| 항목 | 상태 | 비고 |
|------|------|------|
| Google Sign-In | ✅ 사용 중 | `google_auth_data_source.dart` |
| OAuth 클라이언트 ID | Firebase Console에서 설정 | 웹/Android/iOS 각각 등록 |
| 토큰 | Firebase Auth가 관리 | 앱에서 직접 다루지 않음 |

**주의:** `google-services.json`, `GoogleService-Info.plist`에 클라이언트 ID 포함.  
→ Firebase 보안은 **Firestore Rules + Auth**로 보장. API 키 노출만으로는 DB 접근 불가.

---

## 3. ⚠️ Firestore 규칙 (중요)

**현재 상태 (개발용):**
```
allow read, write: if true;  // 모든 사용자 읽기/쓰기 허용
```

**운영 배포 전 반드시 변경 필요.**

예시 (팀별 격리):
```
match /teams/{teamId}/{document=**} {
  allow read, write: if request.auth != null 
    && get(/databases/$(database)/documents/teams/$(teamId)/members/$(request.auth.uid)).data.status == 'active';
}
```

---

## 4. Git에 올리면 안 되는 것

| 파일 | 이유 |
|------|------|
| `.env` | API 키, 비밀키 |
| `*.keystore` | 앱 서명 키 |
| `google-services.json` | (선택) 프로젝트별 설정 – 팀 협업 시 .gitignore 권장 |

**현재:** `google-services.json`은 .gitignore에 없음.  
→ 퍼블릭 저장소라면 추가하는 것이 좋음.

---

## 5. 체크리스트 (배포 전)

- [ ] Firestore Rules를 팀별 격리 규칙으로 교체
- [ ] Firebase Auth 도메인 제한 (이메일 등)
- [ ] `google-services.json` / `GoogleService-Info.plist` 공개 여부 결정
- [ ] Play Store: 앱 서명 키 안전하게 보관
