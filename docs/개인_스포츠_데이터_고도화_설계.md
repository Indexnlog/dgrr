# ê°œì¸ ìŠ¤í¬ì¸  ë°ì´í„° ê³ ë„í™” ì„¤ê³„

> 2026-02-26 ê¸°ì¤€

---

## 1. ëª©í‘œ

MY í˜ì´ì§€ì—ì„œ ê°œì¸ë³„ í†µê³„ë¥¼ í•œëˆˆì— ë³¼ ìˆ˜ ìˆë„ë¡ ê³ ë„í™”

| ì˜ì—­ | í˜„ì¬ | ëª©í‘œ |
|------|------|------|
| **ìˆ˜ì—…** | ì—†ìŒ | NíšŒ ì°¸ì„ / ì „ì²´, ì¶œì„ë¥  |
| **ê²½ê¸°** | ì°¸ì„/ë¶ˆì°¸ ìˆ˜ë§Œ | ì°¸ì„ ìˆ˜, ì°¸ì„ë¥ , ì‹œì¦Œë³„ |
| **ê²½ê¸° í™œì•½** | ì—†ìŒ | ê³¨ Nê°œ, ë„ì›€ Nê°œ |
| **íŒ€ í•©ë¥˜** | ì—†ìŒ | Nì¼ì§¸ / Nê°œì›”ì§¸ |

---

## 2. ë°ì´í„° ì†ŒìŠ¤

### ìˆ˜ì—…
- `teams/{teamId}/events` â€” `type: 'class'`, `attendees` ë°°ì—´
- `attendees`: `{ userId, status: 'attended' | 'attending' | 'late' | 'absent' }`
- **ì§‘ê³„**: í•´ë‹¹ uidê°€ `attended` ë˜ëŠ” `attending`/`late`(ìˆ˜ì—… ì¢…ë£Œ ì „)ì¸ event ìˆ˜

### ê²½ê¸°
- `teams/{teamId}/matches` â€” `attendees`, `absentees`
- **í˜„ì¬**: `my_stats_provider` â€” `recentFinishedMatches` ê¸°ì¤€ ì°¸ì„/ë¶ˆì°¸
- **ì¶”ê°€**: ì „ì²´ ê¸°ê°„ ë˜ëŠ” ì‹œì¦Œë³„(ì›”ë³„) êµ¬ë¶„

### ê²½ê¸° í™œì•½ (ê³¨/ë„ì›€)
- `teams/{teamId}/matches/{matchId}/rounds/{roundId}/records/{recordId}`
- `type: 'goal'`, `teamType: 'our'`
  - `playerId` â†’ ë“ì ì â†’ ê³¨ +1
  - `assistPlayerId` â†’ ë„ì›€ì â†’ ì–´ì‹œìŠ¤íŠ¸ +1
- **ì§‘ê³„**: ëª¨ë“  ì™„ë£Œ ê²½ê¸°ì˜ recordsì—ì„œ í•´ë‹¹ uidë¡œ í•„í„°

### íŒ€ í•©ë¥˜
- `teams/{teamId}/members/{uid}` â€” `joinedAt`
- **ê³„ì‚°**: `DateTime.now().difference(joinedAt).inDays` â†’ "Nì¼ì§¸" ë˜ëŠ” "Nê°œì›”ì§¸"

---

## 3. êµ¬í˜„ ë°©ì•ˆ

### 3.1 Provider êµ¬ì¡°

```
lib/features/mypage/presentation/providers/
â”œâ”€â”€ my_stats_provider.dart      (ê¸°ì¡´: ê²½ê¸° ì¶œì„)
â”œâ”€â”€ my_class_stats_provider.dart (ì‹ ê·œ: ìˆ˜ì—… ì¶œì„)
â”œâ”€â”€ my_match_performance_provider.dart (ì‹ ê·œ: ê³¨/ë„ì›€)
â””â”€â”€ my_tenure_provider.dart     (ì‹ ê·œ: íŒ€ í•©ë¥˜)
```

### 3.2 ë°ì´í„° ì¡°íšŒ

| í†µê³„ | ì¿¼ë¦¬ | ë¹„ê³  |
|------|------|------|
| ìˆ˜ì—… ì¶œì„ | `events` where type == 'class', attendees ë‚´ uid | ê¸°ê°„ í•„í„° ê°€ëŠ¥ |
| ê²½ê¸° ì¶œì„ | `matches` where status in ['finished'] | ê¸°ì¡´ ë¡œì§ í™•ì¥ |
| ê³¨/ë„ì›€ | `matches` â†’ `rounds` â†’ `records` where type=='goal' | ì™„ë£Œ ê²½ê¸°ë§Œ |
| íŒ€ í•©ë¥˜ | `members/{uid}` | joinedAt |

### 3.3 ì„±ëŠ¥ ê³ ë ¤

- **ê²½ê¸° í™œì•½**: recordsê°€ ì„œë¸Œì»¬ë ‰ì…˜ì´ë¯€ë¡œ, ì™„ë£Œ ê²½ê¸° ëª©ë¡ ì¡°íšŒ í›„ ê° matchì˜ rounds/records ìŠ¤íŠ¸ë¦¬ë° ë˜ëŠ” `collectionGroup` ì¿¼ë¦¬ (playerId, assistPlayerId)
- **collectionGroup**: `records` where `playerId == uid` OR `assistPlayerId == uid` â€” íŒ€ ìŠ¤ì½”í”„ í•„í„° í•„ìš”
- **ëŒ€ì•ˆ**: Cloud Functionìœ¼ë¡œ ì£¼ê¸°ì  ì§‘ê³„ â†’ `members/{uid}/stats` ë¬¸ì„œì— ìºì‹œ

---

## 4. UI ì œì•ˆ

### MY í˜ì´ì§€ "ë‚´ ìŠ¤íƒ¯" ì¹´ë“œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š ë‚´ ìŠ¤íƒ¯                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ìˆ˜ì—…  â”‚  ê²½ê¸°  â”‚  ê³¨  â”‚  ë„ì›€  â”‚ í•©ë¥˜ â”‚
â”‚  12/15 â”‚  8/10  â”‚  3   â”‚   2   â”‚ 6ê°œì›”â”‚
â”‚  80%   â”‚  80%   â”‚      â”‚       â”‚     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

ë˜ëŠ” íƒ­/ì„¹ì…˜ìœ¼ë¡œ ë¶„ë¦¬:
- **ìˆ˜ì—…**: ì¶œì„ë¥ , ì°¸ì„/ì „ì²´
- **ê²½ê¸°**: ì°¸ì„ë¥ , ì°¸ì„/ì „ì²´
- **í™œì•½**: ê³¨, ë„ì›€ (ì‹œì¦Œë³„ í† ê¸€)
- **íŒ€**: í•©ë¥˜ Nì¼ì§¸

---

## 5. ìš°ì„ ìˆœìœ„

| ìˆœì„œ | í•­ëª© | ë‚œì´ë„ | ë¹„ê³  |
|------|------|--------|------|
| 1 | íŒ€ í•©ë¥˜ | í•˜ | members.joinedAtë§Œ ì‚¬ìš© |
| 2 | ìˆ˜ì—… ì¶œì„ | ì¤‘ | events ì¿¼ë¦¬ + attendees ì§‘ê³„ |
| 3 | ê²½ê¸° í™œì•½ (ê³¨/ë„ì›€) | ì¤‘ | records ì¡°íšŒ, collectionGroup ë˜ëŠ” ë°°ì¹˜ |
| 4 | ì‹œì¦Œë³„/ê¸°ê°„ë³„ í•„í„° | ì¤‘ | ê¸°ê°„ ì„ íƒ UI |

---

## 6. í™•ì¥ ë¡œë“œë§µ (EXPANSION_CHECKLIST Â§9)

ê¸°ë³¸ í†µê³„ êµ¬í˜„ í›„, ê°œì¸ í’‹ì‚´ ì¦ê±°ì›€ í™•ëŒ€ë¥¼ ìœ„í•œ ì¶”ê°€ ê¸°ëŠ¥:

| ì¹´í…Œê³ ë¦¬ | í•­ëª© |
|----------|------|
| **ê°œì¸ ê¸°ë¡Â·ì„±ê³¼** | ì‹œì¦Œ/ì›”ë³„ ê¸°ë¡, ê°œì¸ ìµœê³  ê¸°ë¡, ì¶œì„ë¥ Â·ë“ì  ê·¸ë˜í”„ |
| **ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜** | ë±ƒì§€/ì—…ì , ë ˆë²¨/ë“±ê¸‰, ì—°ì† ì¶œì„ ìŠ¤íŠ¸ë¦­ |
| **ê²½ê¸° í•˜ì´ë¼ì´íŠ¸** | ë‚´ê°€ ê³¨ ë„£ì€ ê²½ê¸° ëª©ë¡, ìš”ì•½ |
| **í¸ì˜Â·ê²½í—˜** | ê²½ê¸°ì¥ ìœ„ì¹˜Â·êµí†µ, ë‚ ì”¨, ì¤€ë¹„ë¬¼ ì²´í¬ |
| **ì¬ë¯¸ ìš”ì†Œ** | ë‚˜ì˜ í¬ì§€ì…˜, íŒ€ ë‚´ ì—­í• (ë“ì ì™• ë“±), ì‹œì¦Œ ìš”ì•½ ì¹´ë“œ |

â†’ `EXPANSION_CHECKLIST.md` Â§9 ì°¸ê³ 

---

## 7. ì°¸ê³ 

- `my_stats_provider.dart`: ê²½ê¸° ì¶œì„ ë¡œì§ ì°¸ê³ 
- `round_record_data_source.dart`: records êµ¬ì¡°
- `event_model.dart`: attendees êµ¬ì¡°
